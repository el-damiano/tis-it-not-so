@0
# TODO
# FIX OFF BY ONE
# OR REWRITE TEHEE

@1
MOV DOWN, NIL
MOV UP, ACC
MOV ACC, RIGHT
MOV ACC, DOWN

@2
# THE IDEA
# SAVE ON STACK
# ADD TO COUNTER
# IF IN=0 NEG COUN
# READ FROM STACK
# UNTIL COUNTER
# THEN RESUME N1

@3
# RI NODE CONTROL
# ISSUE UP TO WRIT
# INCR COUNTER
# ASK RIRI TO READ
# DECREMENT COUNTE

@4
START:
 JLZ REV
 SWP
 MOV 0, UP
 ADD 1
 SWP
 MOV UP, ACC
 JNZ START
 SWP
 NEG
 JMP START
REV:
 MOV 0, RIGHT
 ADD 1

@5
MOV LEFT, NIL
MOV UP, DOWN

@6


@7
MOV UP, DOWN

@8
# ADD 0 MYSELF